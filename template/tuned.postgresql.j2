[main]
summary=Tuned profile for PostgreSQL Instances
include=throughput-performance

[bootloader]
cmdline=transparent_hugepage=never

[cpu]
governor=performance
energy_perf_bias=performance
min_perf_pct=100

[sysctl]
vm.swappiness=1
vm.dirty_expire_centisecs=500
vm.dirty_writeback_centisecs=250
vm.dirty_ratio=10
vm.dirty_background_ratio=3
vm.overcommit_memory=0

net.ipv4.tcp_timestamps=0
net.core.netdev_max_backlog=1000
net.core.rmem_default=1048576
net.core.rmem_max=1048576
net.core.somaxconn=1024
net.core.wmem_default=1048576
net.core.wmem_max=1048576
net.ipv4.ip_local_port_range=20000 60999
net.ipv4.tcp_max_syn_backlog=2048
net.ipv4.tcp_rmem=4096 87380 8388608
net.ipv4.tcp_wmem=4096 16384 8388608
net.ipv4.udp_rmem_min=4096
net.ipv4.udp_wmem_min=4096

vm.nr_hugepages={{ postgresql_tuned_hugepages | default(8000) }}

[vm]
transparent_hugepages=never
